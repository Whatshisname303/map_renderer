<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>
  <title>Renderer</title>
</head>
<body>
  <!-- Left Sidebar -->
  <div id="left-bar">
    <div id="left-bar-nodes">
      <div style="text-shadow: 1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000;" id="node-list-title" class="list-title">Nodes (0)</div>
      <div id="node-list"></div>
    </div>
    <div id="left-bar-paths">
      <div style="text-shadow: 1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000;" id="path-list-title" class="list-title">Paths (0)</div>
      <div id="path-list"></div>
    </div>
  </div>

  <!-- Map Container -->
  <div id="map">
    <div id="leaflut"></div>
    <div id="node-view"></div>
    <div id="popup" class="popup">
      <button id="close-popup" onclick="closePopup()">Close</button>
      <button id="delete-popup" onclick="deletePopup()">Delete</button>
    </div>
  </div>

  <!-- Right Sidebar -->
  <div id="right-bar">
    <input id="upload" type="file" accept=".json" onchange="handleUpload()" style="padding-left: 10px; color: white; text-shadow: 1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000; padding-top: 20px;" />
    <div style="padding-top: 20px; padding-left: 10px; color: white; text-shadow: 1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000;">
      <label for="from-node">From:</label>
      <input type="text" id="from-node" style="width: 40px;" />
      <label for="to-node" style="padding-left: 10px;">To:</label>
      <input type="text" id="to-node" style="width: 40px;" />
      <div style="text-align: center;">
        <button style="margin-top: 5px;" onclick="connectNodes()">Connect</button>
      </div>
    </div>
    <div style="padding-top: 20px; padding-left: 10px; color: white; text-shadow: 1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000;">
      <label for="node-x">X:</label>
      <input type="text" id="node-x" style="width: 60px;" />
      <label for="node-y" style="padding-left: 10px;">Y:</label>
      <input type="text" id="node-y" style="width: 60px;" />
      <div style="text-align: center;">
        <button style="margin-top: 5px;" onclick="addNode()">Add Node</button>
      </div>
    </div>
    <div style="padding-top: 20px; padding-left: 10px">
      <label for="export-destination">Export Destination:</label>
      <input type="text" id="export-destination" placeholder="data/render_export" style="width: 100%;" />
      <button style="margin-top: 5px;" onclick="openDirectoryPicker()">Choose Destination</button>
      <button style="margin-top: 5px;" onclick="exportData()">Export</button>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="index.js"></script>
  <script>
    window.addEventListener('beforeunload', function (e) {
      e.preventDefault();
      e.returnValue = 'Are you sure you want to leave? Changes you made may not be saved.';
    });
  </script>
</body>
</html>